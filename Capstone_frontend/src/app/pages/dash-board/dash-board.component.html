<!-- Admin View - Submissions from All Users -->
<div class="admin-container container mt-4">
    <h2 class="mb-3">All User Submissions</h2>
  
    <!-- Admin Submissions Table -->
    <table mat-table [dataSource]="allSubmissions" class="mat-elevation-z8">
      <!-- Columns -->
      <ng-container matColumnDef="userName">
        <th mat-header-cell *matHeaderCellDef> User Name </th>
        <td mat-cell *matCellDef="let submission"> {{ submission.userName }} </td>
      </ng-container>
  
      <ng-container matColumnDef="userEmail">
        <th mat-header-cell *matHeaderCellDef> User Email </th>
        <td mat-cell *matCellDef="let submission"> {{ submission.userEmail }} </td>
      </ng-container>
  
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef> Submission Date </th>
        <td mat-cell *matCellDef="let submission"> {{ submission.date }} </td>
      </ng-container>
  
      <ng-container matColumnDef="totalEmissions">
        <th mat-header-cell *matHeaderCellDef> Total Emissions </th>
        <td mat-cell *matCellDef="let submission"> {{ submission.totalEmissions }} kg CO2 </td>
      </ng-container>
  
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef> Action </th>
        <td mat-cell *matCellDef="let submission">
          <button mat-button (click)="expandRow(submission)">View Details</button>
          <!-- Additional actions, like Edit or Delete, can be added -->
          <button mat-button color="warn" (click)="deleteSubmission(submission)">Delete</button>
        </td>
      </ng-container>
  
      <!-- Table Rows -->
      <tr mat-header-row *matHeaderRowDef="['userName', 'userEmail', 'date', 'totalEmissions', 'action']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['userName', 'userEmail', 'date', 'totalEmissions', 'action'];"></tr>
    </table>
  
    <!-- Expanded Submission Details (if a row is expanded) -->
    @if(expandedSubmission){
    <div >
      <h3>Details for {{ expandedSubmission.userName }} - {{ expandedSubmission.date }}</h3>
      <!-- <pre>{{ expandedSubmission | json }}</pre> -->
      <table mat-table [dataSource]="expandedSubmission.details" class="mat-elevation-z8">
        <ng-container matColumnDef="category">
          <th mat-header-cell *matHeaderCellDef> Category </th>
          <td mat-cell *matCellDef="let detail"> {{ detail.category }} </td>
        </ng-container>
        <ng-container matColumnDef="item">
          <th mat-header-cell *matHeaderCellDef> Item </th>
          <td mat-cell *matCellDef="let detail"> {{ detail.item }} </td>
        </ng-container>
        <ng-container matColumnDef="usage">
          <th mat-header-cell *matHeaderCellDef> Usage </th>
          <td mat-cell *matCellDef="let detail"> {{ detail.usage }} </td>
        </ng-container>
        <ng-container matColumnDef="emissions">
          <th mat-header-cell *matHeaderCellDef> Emissions </th>
          <td mat-cell *matCellDef="let detail"> {{ detail.emissions }} kg CO2 </td>
        </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="['category', 'item', 'usage', 'emissions']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['category', 'item', 'usage', 'emissions'];"></tr>
      </table>
    </div>
}
  </div>
  